<!DOCTYPE html>
<html lang="zh">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>自动测视力系统</title>
  <link rel="stylesheet" href="../static/home.css">
</head>

<body>
  <button class="language-switcher" id="languageSwitcher" onclick="toggleLanguage()">中文</button>
  <button class="about-button" id="aboutButton" onclick="goToAboutPage()">关于此项目</button>

  <div class="container">
    <h1 id="title">欢迎使用自动测视力系统</h1>
    <p id="description">本系统将帮助您检测视力，提供专业的测试方法和建议。</p>
    <button class="btn" id="startButton">开始测试</button>
  </div>

  <script>
    let isChinese = true; // 默认语言为中文

    // 切换语言函数
    function toggleLanguage() {
      isChinese = !isChinese;

      const title = document.getElementById("title");
      const description = document.getElementById("description");
      const startButton = document.getElementById("startButton");
      const languageSwitcher = document.getElementById("languageSwitcher");
      const aboutButton = document.getElementById("aboutButton");

      // 添加旋转动画类
      languageSwitcher.classList.add('animate');
      aboutButton.classList.add('animate');

      // 动画结束后移除旋转动画类，确保动画只触发一次
      setTimeout(() => {
        languageSwitcher.classList.remove('animate');
        aboutButton.classList.remove('animate');
      }, 500); // 旋转动画持续时间是 500ms

      if (isChinese) {
        title.textContent = "欢迎使用自动测视力系统";
        description.textContent = "本系统使用计算机视觉算法来自动测量视力";
        startButton.textContent = "开始测试";
        languageSwitcher.textContent = "中文";
        aboutButton.textContent = "关于此项目";
      } else {
        title.textContent = "Welcome to the Automated Vision Test System";
        description.textContent = "This system uses computer vision algorithm to measure vision automatically";
        startButton.textContent = "Start Test";
        languageSwitcher.textContent = "English";
        aboutButton.textContent = "About This Project"; // 英文界面下的文本
      }
    }

    // 跳转到关于页面，并传递当前语言信息
    function goToAboutPage() {
      const url = isChinese ? "/about?lang=zh" : "/about?lang=en";
      window.location.href = url;
    }
  </script>
</body>

</html>